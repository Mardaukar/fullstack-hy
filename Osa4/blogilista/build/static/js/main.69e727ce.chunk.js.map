{"version":3,"sources":["components/Blog.js","components/Notification.js","services/blogs.js","services/login.js","App.js","index.js"],"names":["Blog","_ref","blog","react_default","a","createElement","title","author","Notification","message","className","token","services_blogs","getAll","axios","get","then","response","data","create","Object","asyncToGenerator","regenerator_default","mark","_callee","newObject","config","wrap","_context","prev","next","headers","Authorization","post","sent","abrupt","stop","_x","apply","this","arguments","setToken","newToken","concat","services_login","login","credentials","App","_useState","useState","_useState2","slicedToArray","blogs","setBlogs","_useState3","_useState4","newBlog","setNewBlog","_useState5","_useState6","errorMessage","setErrorMessage","_useState7","_useState8","username","setUsername","_useState9","_useState10","password","setPassword","_useState11","_useState12","user","setUser","useEffect","blogService","initialBlogs","loggedUserJSON","window","localStorage","getItem","JSON","parse","handleLogin","event","_user2","preventDefault","loginService","setItem","stringify","t0","setTimeout","handleBlogChange","target","value","addBlog","blogObject","url","id","length","components_Notification","onSubmit","type","name","onChange","_ref2","_ref3","map","components_Blog","key","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.69e727ce.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Blog = ({ blog }) => (\r\n  <div>\r\n    {blog.title} {blog.author}\r\n  </div>\r\n)\r\n\r\nexport default Blog","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import axios from 'axios'\r\nconst baseUrl = '/api/blogs'\r\n\r\nlet token = null\r\n\r\nconst setToken = newToken => {\r\n  token = `bearer ${newToken}`\r\n}\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = async newObject => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  }\r\n\r\n  const response = await axios.post(baseUrl, newObject, config)\r\n  return response.data\r\n}\r\n\r\nexport default { getAll, create, setToken }","import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data\r\n}\r\n\r\nexport default { login }","import React, { useState, useEffect } from 'react'\r\nimport Blog from './components/Blog'\r\nimport Notification from './components/Notification'\r\nimport blogService from './services/blogs'\r\nimport loginService from './services/login'\r\n\r\nconst App = () => {\r\n  const [blogs, setBlogs] = useState([]) \r\n  const [newBlog, setNewBlog] = useState('') \r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [user, setUser] = useState(null)\r\n\r\n  useEffect(() => {\r\n    blogService\r\n      .getAll()\r\n      .then(initialBlogs => setBlogs(initialBlogs))\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\r\n    if (loggedUserJSON) {\r\n      const user = JSON.parse(loggedUserJSON)\r\n      setUser(user)\r\n      blogService.setToken(user.token)\r\n    }\r\n  }, [])\r\n \r\n  const handleLogin = async (event) => {\r\n      event.preventDefault()\r\n      try {\r\n        const user = await loginService.login({\r\n          username, password,\r\n        })\r\n\r\n        window.localStorage.setItem(\r\n          'loggedBlogappUser', JSON.stringify(user)\r\n        ) \r\n  \r\n        blogService.setToken(user.token)\r\n        setUser(user)\r\n        setUsername('')\r\n        setPassword('')\r\n      } catch (exception) {\r\n        setErrorMessage('wrong credentials')\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        }, 5000)\r\n      }\r\n  }\r\n  \r\n  const rows = () => blogs.map(blog =>\r\n    <Blog\r\n      key={blog.id}\r\n      blog={blog}\r\n    />\r\n  )\r\n  \r\n  const handleBlogChange = (event) => {\r\n    setNewBlog(event.target.value)\r\n  }\r\n  \r\n  const addBlog = (event) => {\r\n    event.preventDefault()\r\n    const blogObject = {\r\n      title: newBlog,\r\n      author: \"Authori\",\r\n      url: \"urli\",\r\n      id: blogs.length + 1,\r\n    }\r\n\r\n    blogService\r\n      .create(blogObject)\r\n      .then(data => {\r\n        setBlogs(blogs.concat(data))\r\n        setNewBlog('')\r\n      })\r\n  }\r\n\r\n  const loginForm = () => (\r\n    <form onSubmit={handleLogin}>\r\n      <div>\r\n        username\r\n          <input\r\n          type=\"text\"\r\n          value={username}\r\n          name=\"Username\"\r\n          onChange={({ target }) => setUsername(target.value)}\r\n        />\r\n      </div>\r\n      <div>\r\n        password\r\n          <input\r\n          type=\"password\"\r\n          value={password}\r\n          name=\"Password\"\r\n          onChange={({ target }) => setPassword(target.value)}\r\n        />\r\n      </div>\r\n      <button type=\"submit\">login</button>\r\n    </form>      \r\n  )\r\n\r\n  const blogForm = () => (\r\n    <form onSubmit={addBlog}>\r\n      <input\r\n        value={newBlog}\r\n        onChange={handleBlogChange}\r\n      />\r\n      <button type=\"submit\">save</button>\r\n    </form>  \r\n  )\r\n\r\n  return (\r\n    <div>\r\n      <h1>Blogs</h1>\r\n\r\n      <Notification message={errorMessage} />\r\n\r\n      <h2>login</h2>\r\n\r\n      {user === null ?\r\n        loginForm() :\r\n        <div>\r\n          <p>{user.name} logged in</p>\r\n          {blogForm()}\r\n        </div>\r\n      }\r\n\r\n      <h2>Blogs</h2>\r\n\r\n      <ul>\r\n        {rows()}\r\n      </ul>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App ","\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}